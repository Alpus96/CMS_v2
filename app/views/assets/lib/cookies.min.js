class Cookies{
    constructor(duration){this.duration=this.assertDuration(duration);this.read('');}
    assertDuration(duration){if(typeof duration!='number'){const parsed=!isNaN(duration)?parseInt(duration):false;if(parsed===false){throw new Error('Invalid duration; The duration should be a Number, in milliseconds. (Is '+typeof duration+')');}return parsed;}return duration;}
    expireTimestamp(duration=this.duration){duration=this.assertDuration(duration);const date=new Date();date.setTime(date.getTime()+duration+(-1*date.getTimezoneOffset()*60*1000));return date.toUTCString();}
    expired(name){if(typeof this.cache[name]==='undefined'){return;}delete this.cache[name];}
    create(name,value,duration=this.duration){duration=this.assertDuration(duration);const expires=setTimeout(()=>{this.expired(name);},duration);document.cookie=name+'='+JSON.stringify(value?{value:value,expires:expires}:'')+'; expires='+this.expireTimestamp(duration)+'; path=/';this.cache[name]={value:value,expires:expires};}
    read(name){if(this.cache&&typeof this.cache[name]!=='undefined'&&typeof this.cache[name].expires!=='undefined'){returnthis.cache[name].value;}const cookies=document.cookie.split('; ');this.cache={};
        for(let i=0;i<cookies.length;i++){const cookieName=cookies[i].substr(0,cookies[i].indexOf('='));const cookieJSON=cookies[i].substr(cookies[i].indexOf('=')+1);const cookieValue=typeof cookieJSON!=='undefined'&&cookieJSON!=='undefined'&&cookieJSON?JSON.parse(cookieJSON):undefined;this.cache[cookieName]=cookieValue;}
        return this.cache[name]?this.cache[name].value:null;}
    extendDuration(name,duration){duration=this.assertDuration(duration);if(typeof this.cache[name]==='undefined'){throw new Error('Can not extend duration of undefined.');}else{const oldCookie=this.cache[name];clearTimeout(oldCookie.expires);this.create(name,oldCookie.value,duration?duration:this.duration);}}
    delete(name){if(typeof this.cache[name]==='undefined'){return;}this.create(name,'',-1);delete this.cache[name];}
}const cookie = new Cookies(10*60*1000);